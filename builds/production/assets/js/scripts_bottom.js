function registerRoutes(e,t,a){e.state("index",{url:"/index",templateUrl:"views/main.php",controller:"IndexController"}).state("about",{url:"/about",templateUrl:"views/about.php",controller:"AboutController"}).state("facilities",{url:"/facilities",params:{facId:null},templateUrl:"views/facilities.php",controller:"FacilitiesController"}).state("booking",{url:"/booking",params:{facId:null,facName:null},templateUrl:"views/booking.php",controller:"BookingController"}).state("gallery",{url:"/gallery",templateUrl:"views/gallery.php",controller:"GalleryController"}).state("podcast",{url:"/podcast",templateUrl:"views/podcast.php",controller:"PodcastController"}).state("contact",{url:"/contact",templateUrl:"views/contact.php",controller:"ContactController"}),t.otherwise("/index")}function blinker(){$(".blink_me").fadeOut(500).fadeIn(500)}function blinker(){$(".blink_me").fadeOut(500).fadeIn(500)}var myApp=angular.module("myApp",["ui.router","angularUtils.directives.dirPagination",,"angular-lazy-loader"]);myApp.config(["$stateProvider","$urlRouterProvider","$locationProvider",registerRoutes]),myApp.run(["$rootScope","$location",function(e,t){e.$location=t}]),myApp.directive("ngSpinnerBar",["$rootScope",function(e){return{link:function(t,a,l){a.addClass("hide"),e.$on("$stateChangeStart",function(){a.removeClass("hide")}),e.$on("$stateChangeSuccess",function(){a.addClass("hide")}),e.$on("$stateNotFound",function(){a.addClass("hide")}),e.$on("$stateChangeError",function(){a.addClass("hide")})}}}]),angular.element(document).ready(function(){}),myApp.controller("IndexController",["$scope","$rootScope","$stateParams","$http",function(e,t,a,l){t.facId=a.facId,t.facId=a.facId,$("#main-menu ul li").removeClass("active"),$("#index_li").addClass("active"),jQuery("html,body").animate({scrollTop:0},200),new WOW({mobile:!1}).init(),e.chkinRawDate,e.chkoutRawDate,e.chkinMysqlDate,e.chkoutMysqlDate,e.indexData=[],l.get("http://fm.academy.cinfores.com/includes/api.php?Action=getFacility&ownerid=horlikins").then(function(t){t.data.resp.length>=1?e.indexData=t.data.resp:($("#facilityDiv").html(""),$("#facilityDiv").html('<h2 class="blink_me" style="text-align:center; color:#50ACE7;">Could not load the requested content.</h2>'),setInterval(blinker,2e3),console.log("error"))},function(e){$("#facilityDiv").html(""),$("#facilityDiv").html('<h2 class="blink_me" style="text-align:center; color:#50ACE7;">Could not load the requested content.</h2>'),setInterval(blinker,2e3)}),e.showLoad=function(e){angular.element(document.querySelector(".page-spinner-bar")).removeClass("hide")},e.CheckAvailabilty=function(){$("#response").block({message:'<p style="margin-bottom:0;"><img src="assets/img/loading.gif" />Checking..</p>',css:{border:"3px solid #90C3D4"},cursorReset:"default"}),e.chkinRawDate=$("#chkIndate").datepicker("getDate"),e.chkoutRawDate=$("#chkOutdate").datepicker("getDate"),""==$("#SelectFacilities").val()?(angular.element(document.querySelector("#response")).html('<p style="text-align: center; background:black;color:white;" class="blink_me">Please select a facility to check.</p>'),setInterval(blinker,2e3)):null==e.chkinRawDate?(angular.element(document.querySelector("#response")).html('<p style="text-align: center; background:black;color:white;" class="blink_me">Please choose your check-in date</p>'),setInterval(blinker,2e3)):null==e.chkoutRawDate?(angular.element(document.querySelector("#response")).html('<p style="text-align: center;background:black; color:white;" class="blink_me">Please choose your check-out date</p>'),setInterval(blinker,2e3)):$.ajax({type:"POST",url:"includes/process_index.php",data:{main:"main",startDate:e.chkinRawDate,endDate:e.chkoutRawDate},cache:!1,success:function(t){var a=JSON.parse(t);e.chkinMysqlDate=a.msDate,e.chkoutMysqlDate=a.meDate;var l=($("#SelectFacilities").val(),"http://fm.academy.cinfores.com/includes/api.php?Action=chkAvailability&fid="+$("#SelectFacilities").val()+"&sdate="+e.chkinMysqlDate+"&edate="+e.chkoutMysqlDate+"&ownerid=horlikins");$.ajax({url:l,cache:!1,success:function(e){$("#response").unblock();var t,a=JSON.parse(e);for(var l in a.resp)"Not_Available"==a.resp[l][0].status&&(t=!1);0==t?angular.element(document.querySelector("#response")).html('<h2 style="text-align: center; background:black;" class="">Not Available</h2>'):angular.element(document.querySelector("#response")).html('<h2 style="text-align: center;background:black;color:white;" class="">Available</h2>')},error:function(e){$("#response").unblock(),$("#response").html(""),$("#response").html('<h2 class="blink_me" style="text-align:center; color:#50ACE7;">Could not check availability of facility at this time. </h2>'),setInterval(blinker,2e3)}})}})}}]),myApp.controller("AboutController",["$scope",function(e){jQuery("html,body").animate({scrollTop:0},200),$("#main-menu ul li").removeClass("active"),$("#about_li").addClass("active")}]),myApp.controller("FacilitiesController",["$scope","$rootScope","$stateParams","$http",function(e,t,a,l){t.facId=a.facId,jQuery("html,body").animate({scrollTop:0},200),$("#main-menu ul li").removeClass("active"),$("#fac_li").addClass("active"),e.documents=[],l.get("http://fm.academy.cinfores.com/includes/api.php?Action=getFacility&ownerid=horlikins").then(function(t){t.data.resp.length>=1?e.documents=t.data.resp:($("#facilityDiv2").html(""),$("#facilityDiv2").html('<h2 class="blink_me" style="text-align:center; color:#50ACE7;">Could not load the requested content.</h2>'),setInterval(blinker,2e3))},function(e){$("#facilityDiv2").html(""),$("#facilityDiv2").html('<h2 class="blink_me" style="text-align:center; color:#50ACE7;">Could not load the requested content.</h2>'),setInterval(blinker,2e3)}),e.showLoad=function(e){angular.element(document.querySelector(".page-spinner-bar")).removeClass("hide")}}]),myApp.controller("GalleryController",["$scope",function(e){jQuery("html,body").animate({scrollTop:0},200),$("#main-menu ul li").removeClass("active"),$("#gallery_li").addClass("active")}]),myApp.controller("PodcastController",["$scope",function(e){jQuery("html,body").animate({scrollTop:0},200),$("#main-menu ul li").removeClass("active"),$("#pod_li").addClass("active")}]),myApp.controller("ContactController",["$scope",function(e){jQuery("html,body").animate({scrollTop:0},200),$("#main-menu ul li").removeClass("active"),$("#contact_li").addClass("active")}]),myApp.controller("BookingController",["$scope","$rootScope","$stateParams","$http",function(e,t,a,l){angular.element(document).ready(function(){angular.element(document.querySelector(".hidden-print")).hide(),angular.element(document.querySelector(".pay_now")).hide();var e=function(){return{init:function(){if(jQuery().bootstrapWizard){var e=$("#submit_form"),t=$(".alert-danger",e),a=$(".alert-success",e);e.validate({doNotHideMessage:!0,errorElement:"span",errorClass:"help-block help-block-error",focusInvalid:!1,rules:{firstname:{minlength:3,required:!0},lastname:{minlength:3,required:!0},email:{required:!0,email:!0},phone:{digits:!0,minlength:11,maxlength:11,required:!0},addr:{minlength:3,required:!0},booking_for:{minlength:3,required:!0}},messages:{"payment[]":{required:"Please select at least one option",minlength:jQuery.validator.format("Please select at least one option")},phone:{required:"Please enter only digits"}},errorPlacement:function(e,t){"gender"==t.attr("name")?e.insertAfter("#form_gender_error"):"payment[]"==t.attr("name")?e.insertAfter("#form_payment_error"):e.insertAfter(t)},invalidHandler:function(e,l){a.hide(),t.show(),$("html, body").animate({scrollTop:$(t).offset().top},200)},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){"gender"==e.attr("for")||"payment[]"==e.attr("for")?(e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()):e.addClass("valid").closest(".form-group").removeClass("has-error").addClass("has-success")},submitHandler:function(e){a.show(),t.hide()}});var l=function(){$("#tab4 .form-control-static",e).each(function(){var t=$('[name="'+$(this).attr("data-display")+'"]',e);if(t.is(":radio")&&(t=$('[name="'+$(this).attr("data-display")+'"]:checked',e)),t.is(":text")||t.is("textarea"))$(this).html(t.val());else if(t.is("select"))$(this).html(t.find("option:selected").text());else if(t.is(":radio")&&t.is(":checked"))$(this).html(t.attr("data-title"));else if("payment"==$(this).attr("data-display")){var a=[];$('[name="payment[]"]:checked').each(function(){a.push($(this).attr("data-title"))}),$(this).html(a.join("<br>"))}})},n=function(e,t,a){var n=t.find("li").length,o=a+1;$(".step-title",$("#form_wizard_1")).text("Step "+(a+1)+" of "+n),jQuery("li",$("#form_wizard_1")).removeClass("done");for(var i=t.find("li"),r=0;a>r;r++)jQuery(i[r]).addClass("done");1==o?$("#form_wizard_1").find(".button-previous").hide():$("#form_wizard_1").find(".button-previous").show(),o>=n?($("#form_wizard_1").find(".button-next").hide(),$("#form_wizard_1").find(".button-submit").show(),l()):($("#form_wizard_1").find(".button-next").show(),$("#form_wizard_1").find(".button-submit").hide(),$("#form_wizard_1").find(".hidden-print").hide()),$("html, body").animate({scrollTop:$("#HeadBoxTitle").offset().top},500)};$("#form_wizard_1").bootstrapWizard({nextSelector:".button-next",previousSelector:".button-previous",onTabClick:function(l,o,i,r){return a.hide(),t.hide(),0==e.valid()?!1:void n(l,o,r)},onNext:function(l,o,i){return a.hide(),t.hide(),0==e.valid()?!1:void n(l,o,i)},onPrevious:function(e,l,o){a.hide(),t.hide(),n(e,l,o)},onTabShow:function(e,t,a){var l=t.find("li").length,n=a+1,o=n/l*100;$("#form_wizard_1").find(".progress-bar").css({width:o+"%"})}}),$("#form_wizard_1").find(".button-previous").hide(),$("#form_wizard_1 .button-submit").click(function(){}).hide()}}}}();e.init()}),jQuery("html,body").animate({scrollTop:0},200),$("#main-menu ul li").removeClass("active");var n=(angular.element(document.querySelector("#DisplayedCheckList1")),angular.element(document.querySelector("#DisplayedCheckList2")),angular.element(document.querySelector("#startDateValue1"))),o=angular.element(document.querySelector("#startDateValue2")),i=angular.element(document.querySelector("#endDateValue1")),r=angular.element(document.querySelector("#endDateValue2"));e.totalCost,e.displayCost,e.chkinRawDate,e.chkoutRawDate,e.displayStartDate,e.displayEndDate,e.chkinMysqlDate,e.chkoutMysqlDate,e.Facilities,e.SelectedFacilitiesToDisplay,e.SelectedFacilitiesIdMySQL,e.SelectedFacilitiesCostMySQL,e.sumTotalArray,e.DisplayedCheckedList2wayDataBind,e.in_fname,e.in_lname,e.in_email,e.in_phone,e.in_addr,e.spec_req,e.facId=a.facId,e.facName=a.facName,Array.prototype.sum=function(e){for(var t=0,a=0,l=this.length;l>a;a++)t+=this[a][e];return t},e.BookingData=[],l.get("http://fm.academy.cinfores.com/includes/api.php?Action=getFacility&ownerid=horlikins").then(function(t){t.data.resp.length>=1?e.BookingData=t.data.resp:($("#FacilitiesBlock").html(""),$("#FacilitiesBlock").html('<h2 class="blink_me" style="text-align:center; color:#50ACE7;">Could not load the requested content.</h2>'),setInterval(blinker,2e3))},function(e){$("#FacilitiesBlock").html(""),$("#FacilitiesBlock").html('<h2 class="blink_me" style="text-align:center; color:#50ACE7;">Could not load the requested content.</h2>'),setInterval(blinker,2e3)}),e.doSomethings=function(){e.chkinRawDate=$("#chkIndate").datepicker("getDate"),e.chkoutRawDate=$("#chkOutdate").datepicker("getDate"),e.Facilities={},e.Facilities.checked=[],e.Facilities.unchecked=[],$("input:checkbox").each(function(){var t=$(this);t.is(":checked")?e.Facilities.checked.push(t.attr("id")):e.Facilities.unchecked.push(t.attr("id"))}),e.SelectedFacilitiesToDisplay=[],e.SelectedFacilitiesIdMySQL=[],e.SelectedFacilitiesCostMySQL=[],$.each(e.BookingData,function(t,a){-1!==jQuery.inArray(a.fid,e.Facilities.checked)&&(e.SelectedFacilitiesToDisplay.push({name:a.facility,costdays:a.costdays}),e.SelectedFacilitiesIdMySQL.push(a.fid),e.SelectedFacilitiesCostMySQL.push(a.costdays))}),e.sumTotalArray=[],e.sumTotalArray2=[],$.each(e.SelectedFacilitiesToDisplay,function(t,a){e.sumTotalArray.push(a.costdays)}),$.each(e.SelectedFacilitiesToDisplay,function(t,a){e.sumTotalArray2.push({num:parseInt(a.costdays)})}),e.displayCost=e.sumTotalArray2.sum("num")},e.payNow=function(){},e.CheckAvailabilty=function(){$("#response").block({message:'<p style="margin-bottom:0;"><img src="assets/img/loading.gif" />Checking..</p>',css:{border:"3px solid #90C3D4"},cursorReset:"default"}),e.doSomethings();var t=JSON.stringify(e.sumTotalArray);e.sumTotalArray.length<1?(angular.element(document.querySelector("#response")).html('<h2 style="text-align: center" class="blink_me">You haven\'t selected any facility</h2>'),setInterval(blinker,1500)):null==e.chkinRawDate?(angular.element(document.querySelector("#response")).html('<h2 style="text-align: center" class="blink_me">You haven\'t selected your check-in date</h2>'),setInterval(blinker,1500)):null==e.chkoutRawDate?angular.element(document.querySelector("#response")).html('<h2 style="text-align: center">You haven\'t selected your check-out date</h2>'):$.ajax({type:"POST",url:"includes/process.php",data:{data:t,startDate:e.chkinRawDate,endDate:e.chkoutRawDate},cache:!1,success:function(t){var a=JSON.parse(t);if(e.totalCost=a.total,e.chkinMysqlDate=a.msDate,e.chkoutMysqlDate=a.meDate,e.displayStartDate=a.startDate,e.displayEndDate=a.endDate,e.chkoutMysqlDate<e.chkinMysqlDate)angular.element(document.querySelector("#response")).html('<h2 style="text-align: center" class="">Check-out date cannot be earlier than check-in date</h2>'),setInterval(blinker,1500);else{var l="http://fm.academy.cinfores.com/includes/api.php?Action=chkAvailability&fid="+e.SelectedFacilitiesIdMySQL.toString()+"&sdate="+e.chkinMysqlDate+"&edate="+e.chkoutMysqlDate+"&ownerid=horlikins";$.ajax({url:l,cache:!1,success:function(e){$("#response").unblock();var t,a=JSON.parse(e),l=[];$.each(a.resp,function(e){l.push(a.resp[e][0].status)}),-1!==jQuery.inArray("Not_Available",l)&&(t=!1),0==t?angular.element(document.querySelector("#response")).html('<h2 style="text-align: center">Not Available</h2>'):angular.element(document.querySelector("#response")).html('<h2 style="text-align: center">Available</h2>')},error:function(e){$("#response").unblock(),$("#response").html(""),$("#response").html('<h2 class="blink_me" style="text-align:center; color:#50ACE7;">Could not check availability of facility at this time. </h2>'),setInterval(blinker,2e3)}})}}})},e.GetCheckedItems=function(){e.in_fname=angular.element(document.querySelector("#in_fname")).val(),e.in_lname=angular.element(document.querySelector("#in_lname")).val(),e.in_email=angular.element(document.querySelector("#in_email")).val(),e.in_phone=angular.element(document.querySelector("#in_phone")).val(),e.in_addr=angular.element(document.querySelector("#in_addr")).val(),e.spec_req=angular.element(document.querySelector("#message-field")).val(),e.doSomethings();var t=JSON.stringify(e.sumTotalArray);$.ajax({type:"POST",url:"includes/process.php",data:{data:t,startDate:e.chkinRawDate,endDate:e.chkoutRawDate},cache:!1,success:function(t){var a=JSON.parse(t);e.totalCost=a.total,e.chkinMysqlDate=a.msDate,e.chkoutMysqlDate=a.meDate,e.displayStartDate=a.startDate,e.displayEndDate=a.endDate,n.html(""),o.html(""),i.html(""),r.html(""),n.html(e.displayStartDate),o.html(e.displayStartDate),i.html(e.displayEndDate),r.html(e.displayEndDate)}})},e.SubmitBooking=function(){if($("#CompleteBookingResponse").block({message:'<p style="margin-bottom:0;"><img src="assets/img/loading.gif" />Processing..</p>',cursorReset:"default"}),e.in_fname=angular.element(document.querySelector("#in_fname")).val(),e.in_lname=angular.element(document.querySelector("#in_lname")).val(),e.in_email=angular.element(document.querySelector("#in_email")).val(),e.in_phone=angular.element(document.querySelector("#in_phone")).val(),e.in_addr=angular.element(document.querySelector("#in_addr")).val(),e.spec_req=angular.element(document.querySelector("#message-field")).val(),""===e.in_fname||""===e.in_lname||""===e.in_email||""===e.in_phone||""===e.in_addr||0===e.SelectedFacilitiesToDisplay.length||""===e.chkinMysqlDate||"1970-01-01"==e.chkinMysqlDate||"1970-01-01"===e.chkoutMysqlDate||""===e.chkoutMysqlDate)angular.element(document.querySelector("#CompleteBookingResponse")).html('<h2 style="text-align: center; color: red;">One or more required reservation information have not been provided. Please provide all required information and try again.</h2>');else if(e.chkoutMysqlDate<e.chkinMysqlDate)angular.element(document.querySelector("#CompleteBookingResponse")).html('<h2 style="text-align: center; color: red;">Check-out date cannot be earlier than check-in date</h2>');else{var t="http://fm.academy.cinfores.com/includes/api.php?Action=chkAvailability&fid="+e.SelectedFacilitiesIdMySQL.toString()+"&sdate="+e.chkinMysqlDate+"&edate="+e.chkoutMysqlDate+"&ownerid=horlikins";$.ajax({url:t,cache:!1,success:function(t){var a,l=JSON.parse(t),n=[];if($.each(l.resp,function(e){n.push(l.resp[e][0].status)}),-1!==jQuery.inArray("Not_Available",n)&&(a=!1),0==a)$("#CompleteBookingResponse").unblock(),$("#CompleteBookingResponse").html(""),$("#CompleteBookingResponse").html('<h2 class="blink_me" style="text-align:center; color:#f50404;">Facility or Facilities not available at this time. Please try a different date.</h2>'),setInterval(blinker,2e3);else{var o="http://fm.academy.cinfores.com/includes/api.php?Action=facilitybooking&ownerid=horlikins&fid="+e.SelectedFacilitiesIdMySQL.toString()+"&cost="+e.SelectedFacilitiesCostMySQL.toString()+"&sdate="+e.chkinMysqlDate+"&edate="+e.chkoutMysqlDate+"&custid=cid&surname="+e.in_fname+"&firstname="+e.in_lname+"&email="+e.in_email+"&phone="+e.in_phone+"&address="+e.in_addr+"&spec_req="+e.spec_req;console.log(o),$.ajax({url:o,cache:!1,success:function(t){$("#CompleteBookingResponse").unblock();var a=JSON.parse(t),l=[],n=[];for(var o in a.resp.allresp)"ok"==a.resp.allresp[o]?l.push(o):"error"==a.resp.allresp[o]&&n.push(o);var i=[];$.each(l,function(t){i.push(e.SelectedFacilitiesToDisplay[t].name)});var r=[];$.each(n,function(t){r.push(e.SelectedFacilitiesToDisplay[t].name)}),angular.element(document.querySelector("#CompleteBookingResponse")).html(""),0===n.length?(angular.element(document.querySelector("#CompleteBookingResponse")).html('<h3 style="text-align: center; color: green;">Your reservation has been made successfully!</h3><h2 style="text-align: center; color: green;">Transaction ID: '+a.resp.transaction_id+"</h2>"),angular.element(document.querySelector(".hidden-print")).show(),angular.element(document.querySelector(".pay_now")).show(),angular.element(document.querySelector(".button-submit")).hide()):angular.element(document.querySelector("#CompleteBookingResponse")).html('<h2 style="text-align: center;">Your reservation(s) have been made, however the reservation(s) for '+r.toString()+" was not successful</h2>")},error:function(e){$("#CompleteBookingResponse").unblock(),$("#CompleteBookingResponse").html(""),$("#CompleteBookingResponse").html('<h2 class="blink_me" style="text-align:center; color:#f50404;">Could not complete reservation at this time. </h2>'),setInterval(blinker,2e3)}})}},error:function(e){$("#CompleteBookingResponse").unblock(),$("#CompleteBookingResponse").html(""),$("#CompleteBookingResponse").html('<h2 class="blink_me" style="text-align:center; color:#f50404;">Could not complete reservation at this time. </h2>'),setInterval(blinker,2e3)}})}},jQuery(document).on("click",".goToConfirm",function(e){e.preventDefault(),$("#booking-tabs").children().removeClass("active"),$("#BookingConfirm").addClass("active"),$("html, body").animate({scrollTop:$("#HeadBoxTitle").offset().top},500)})}]);
